<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- 配置Mabatis映射文件 -->
<mapper namespace="com.mapper.ClassifyinfoMapper">
    <resultMap type="com.entity.Classifyinfo" id="classifyinfoMap">
        <id property="classifyinfoid" column="classifyinfoid"/>

        <result property="title" column="title"/>
        <result property="slogan" column="slogan"/>
        <result property="opendate" column="opendate"/>
        <result property="contact" column="contact"/>
        <result property="contents" column="contents"/>
        <result property="image" column="image"/>
    </resultMap>
    <!-- 插入语句 Mapper通过id调用此配置 -->
    <insert id="insert" parameterType="classifyinfo">
        insert into
        classifyinfo(  title , slogan ,
        opendate ,
        contact , contents,image )
        values(
      #{title} , #{slogan} , #{opendate} ,
        #{contact} ,
        #{contents} ,#{image})
    </insert>
    <!-- 更新语句 Mapper通过id调用此配置 -->
    <update id="update" parameterType="classifyinfo">
        update classifyinfo set

        title=#{title} ,
        slogan=#{slogan} , opendate=#{opendate} ,
        contact=#{contact} ,
        contents=#{contents} , image=#{image} where
        classifyinfoid=#{classifyinfoid}
    </update>
    <!-- 按主键删除 Mapper通过id调用此配置 -->
    <delete id="delete" parameterType="String">
        delete from classifyinfo where
        classifyinfoid = #{classifyinfoid}
    </delete>
    <!-- 查询全部信息 Mapper通过id调用此配置 -->
    <select id="getAll" parameterType="map" resultMap="classifyinfoMap">
        select classifyinfo.* from
        classifyinfo
        where 1=1

        <if test="keyword != null and keyword != ''">
            and
            (

            classifyinfo.title like CONCAT('%',#{keyword},'%')

            )
        </if>


        order by classifyinfoid desc
        <if test="(start != null and start != '') or start==0 ">
            <if test=" limit != null and limit != ''">
                limit #{start},#{limit}
            </if>
        </if>

    </select>


    <!-- 统计 获取 总数    用于分页-->

    <select id="getRowSize" parameterType="map" resultType="int">
        select count(1) from
        classifyinfo
        where 1=1

        <if test="keyword != null and keyword != ''">
            and
            (

            classifyinfo.title like CONCAT('%',#{keyword},'%')

            )
        </if>


    </select>
    <!-- 按主键查询 Mapper通过id调用此配置 -->
    <select id="getById" parameterType="String" resultMap="classifyinfoMap">
        select a.* from classifyinfo a where classifyinfoid=#{classifyinfoid}
    </select>
    <!-- 按条件精确查询 Mapper通过id调用此配置 -->
    <select id="getByCond" parameterType="classifyinfo" resultMap="classifyinfoMap">
        select a.* from classifyinfo a where 1=1


        <if test="title != null and '' != title">
            and a.title = #{title}
        </if>
        <if test="slogan != null and '' != slogan">
            and a.slogan = #{slogan}
        </if>
        <if test="opendate != null and '' != opendate">
            and a.opendate = #{opendate}
        </if>
        <if test="contact != null and '' != contact">
            and a.contact = #{contact}
        </if>

        <if test="contents != null and '' != contents">
            and a.contents = #{contents}
        </if>
    </select>
    <!-- 按条件模糊查询 Mapper通过id调用此配置 -->
    <select id="getByLike" parameterType="classifyinfo" resultMap="classifyinfoMap">
        select a.* from classifyinfo a where 1=1

        <if test="title != null and '' != title">
            and a.title like CONCAT('%', CONCAT(#{title}, '%'))
        </if>
        <if test="slogan != null and '' != slogan">
            and a.slogan like CONCAT('%', CONCAT(#{slogan}, '%'))
        </if>
        <if test="opendate != null and '' != opendate">
            and a.opendate like CONCAT('%', CONCAT(#{opendate}, '%'))
        </if>
        <if test="contact != null and '' != contact">
            and a.contact like CONCAT('%', CONCAT(#{contact}, '%'))
        </if>

        <if test="contents != null and '' != contents">
            and a.contents like CONCAT('%', CONCAT(#{contents}, '%'))
        </if>
    </select>
</mapper>


